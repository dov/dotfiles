{% extends "pricing/base_contacts.html" %}
{% load getattribute %}

{% block content %}
<h2>Chamber/Firm details</h2>

{% if details_table %}
<table width="90%" border="1" summary="table contains listing of this chamber's contacts">
	<thead>
	{% for header, field in details_table %}
	<tr class="{% cycle 'row1' 'row2' %}">
		<th>{{header}}</th>
		<td>{% autoescape off %}{{field}}{% endautoescape %}</td>
	</tr>
	{% endfor %}
	</thead>
</table>
{% else %}
    Chamber {{chamber}} has not input their details yet
{% endif %}

{% if panels %}
<h2>Panels appointed to:</h2>
<ul>
	{% for panel in panels %}
		<li>{{panel}}</li>
	{% endfor %}
</ul>
{% endif %}

{% if barristers  %}
<h2>Barristers</h2>
	{% if for_invoice %}
		<p>This table shows only those barristers suitable for working on 
			<a href="{% url pricing.views.fee_calculation_view for_invoice.id %}">
				this invoice</a>
		</p>
		<table width="90%" border="1" summary="table contains listing of this chamber's barristers that could work on the invoice">
	{% else %}
		{% if for_seniority %}
			<p>This table shows only those barristers of seniority: {{for_seniority}}</p>
			<table width="90%" border="1" summary="table contains listing of this chamber's barristers for a particular seniority">
		{% else %}	
			<table width="90%" border="1" summary="table contains listing of all this chamber's barristers">
		{% endif %}
	{% endif %}
		<thead>
			<tr>
				<th>Name</th>
				<th>Seniority</th>
				<th>Year of Call</th>
				<th>Framework Panels</th>
			</tr>
		</thead>
		<tbody>
		{% if barristers %}
		{% for b in barristers %}
			<tr class="{% cycle 'row1' 'row2' %}">
				<td>{{b.full_name}}</td>
				<td>{{b.seniority}}</td>
				<td>{{b.year_of_call}}</td>
				<td>{{b.panels_as_text}}</td>
			</tr>
		{% endfor %}
		</tbody>
    	</table>
		{% else %}
    		<p>No Barristers.</p>
		{% endif %}
		{% if for_seniority or for_invoice %}
			<p><a href="{% url pricing.views.chamber_view chamber.id %}">
				Show all</a>
			</p>
		{% endif %}
{% else %}
	{% if for_invoice %}
		<p>No barristers suitable for working on 
			<a href="{% url pricing.views.fee_calculation_view for_invoice.id %}">
				this invoice</a>
		</p>
	{% else %}
		{% if for_seniority %}
			<p>No barristers of seniority: {{for_seniority}}</p>
		{% endif %}
	{% endif %}
{% endif %}

{% endblock content %}
